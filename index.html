<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Data Viewer</title>
    <style>
        body {
            background-color: #121212;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        select, button {
            padding: 10px;
            background-color: #333;
            color: white;
            border: none;
        }
        .data-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h2>Dynamic Dropdowns with Google Sheets Data</h2>
    <div class="container">
        <select id="stateDropdown" onchange="updateAHJs()">
            <option value="">Select State</option>
        </select>
        <select id="ahjDropdown">
            <option value="">Select AHJ</option>
        </select>
        <select id="utilityDropdown">
            <option value="">Select Utility</option>
        </select>
        <select id="batteryDropdown">
            <option value="">Select Battery</option>
        </select>
        <button onclick="resetSelections()">Reset</button>
    </div>
    <div class="data-container" id="dataDisplay"></div>
    
    <script>
        async function fetchData() {
            const sheetUrl = 'https://script.google.com/macros/s/AKfycbw3eH_sgCMeZu8DTTV6QevdE41ZY84hdCv_R2eTB3gCOHmYlS6KHzU3invCkV2RGY2i/exec'; // Replace with actual API
            const response = await fetch(sheetUrl);
            const data = await response.json();
            processDropdownData(data);
        }
        
        function processDropdownData(data) {
            let states = new Set();
            data.forEach(row => states.add(row.STATE));
            
            const stateDropdown = document.getElementById('stateDropdown');
            states.forEach(state => {
                let option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                stateDropdown.appendChild(option);
            });
        }

        function updateAHJs() {
            const selectedState = document.getElementById('stateDropdown').value;
            const ahjDropdown = document.getElementById('ahjDropdown');
            ahjDropdown.innerHTML = '<option value="">Select AHJ</option>';
            
            // Filter and update AHJ dropdown based on state (mock example)
            if (selectedState) {
                // Fetch data again or use cached data
            }
        }

        function resetSelections() {
            document.getElementById('stateDropdown').value = '';
            document.getElementById('ahjDropdown').innerHTML = '<option value="">Select AHJ</option>';
            document.getElementById('utilityDropdown').innerHTML = '<option value="">Select Utility</option>';
            document.getElementById('batteryDropdown').innerHTML = '<option value="">Select Battery</option>';
            document.getElementById('dataDisplay').innerHTML = '';
        }
        
        fetchData();
    </script>
</body>
</html>
